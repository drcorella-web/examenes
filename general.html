<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen Dental - Loma Linda</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background: #f0f4f8;
            padding: 20px;
            text-align: center;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: auto;
        }

        h2 { color: #2c3e50; }

        .opcion {
            display: block;
            width: 100%;
            background: #e9ecef;
            border: none;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: 0.3s;
        }

        .opcion:hover { background: #d1d8e0; }

        #feedback {
            font-weight: bold;
            margin-top: 15px;
            min-height: 24px;
        }

        #contador {
            color: #7f8c8d;
            font-size: 14px;
        }
    </style>
</head>

<body onmousedown="iniciarAudio()">
    <audio id="sonido-bien" src="audios/aplausos.mp3"></audio>
    <audio id="sonido-mal" src="audios/failfara.mp3"></audio>
    <audio id="sonido-final" src="audios/fanfarrias.mp3"></audio>

    <div class="card">
        <h2 id="titulo">Reto Dental Loma Linda</h2>
        <div id="contenedor-juego">
            <p id="pregunta-texto" style="font-size: 18px; font-weight: bold;"></p>
            <div id="opciones"></div>
            <div id="feedback"></div>
            <p id="contador">Pregunta: 1 de 20</p>
        </div>
    </div>

    <script>
        function iniciarAudio() {
            document.getElementById("sonido-bien").load();
            document.getElementById("sonido-mal").load();
            document.getElementById("sonido-final").load();
        }

        const bancoDePreguntas = [
            { q: "Â¿CuÃ¡l es el objetivo principal del raspado y alisado radicular (RAR)?", a: ["Blanquear los dientes", "Eliminar biofilme y cÃ¡lculo", "Curar caries", "Apretar dientes flojos"], correct: 1 },
            { q: "Â¿QuÃ© cÃ©lula es la primera en llegar a un sitio de inflamaciÃ³n aguda?", a: ["MacrÃ³fago", "NeutrÃ³filo", "Linfocito", "CÃ©lula plasmÃ¡tica"], correct: 1 },
            { q: "Â¿CuÃ¡l es el material estÃ¡ndar de oro para el recubrimiento pulpar directo?", a: ["IonÃ³mero de Vidrio", "MTA (Agregado de TriÃ³xido Mineral)", "Fosfato de Zinc", "Resina"], correct: 1 },
            { q: "Â¿CuÃ¡ntos dÃ­as despuÃ©s de la extracciÃ³n ocurre comÃºnmente la Alveolitis Seca?", a: ["1 hora", "3-5 dÃ­as", "2 semanas", "1 mes"], correct: 1 },
            { q: "Â¿QuÃ© espacio estÃ¡ involucrado en la Angina de Ludwig?", a: ["Submandibular", "Submental", "Sublingual", "Todos los anteriores"], correct: 3 },
            { q: "Â¿CuÃ¡l es la causa principal de un margen abierto en una corona?", a: ["Mala impresiÃ³n", "Demasiado cemento", "Tiempo de fraguado rÃ¡pido", "Paciente mordiendo fuerte"], correct: 0 },
            { q: "La apariencia de 'EscalÃ³n' en el hueso alveolar es un signo de:", a: ["Hueso sano", "OclusiÃ³n traumÃ¡tica", "Deficiencia de Vitamina C", "Gingivitis"], correct: 1 },
            { q: "Â¿QuÃ© tejido dental tiene el mayor contenido mineral?", a: ["Dentina", "Esmalte", "Cemento", "Hueso alveolar"], correct: 1 },
            { q: "Una 'Prueba de frÃ­o' en endodoncia verifica principalmente:", a: ["Salud periodontal", "Vitalidad pulpar", "Fractura radicular", "Caries dental"], correct: 1 },
            { q: "Â¿CuÃ¡l es el tumor benigno de glÃ¡ndulas salivales mÃ¡s comÃºn?", a: ["Tumor de Warthin", "Adenoma PleomÃ³rfico", "Carcinoma Mucoepidermoide", "Adenoma"], correct: 1 },
            { q: "Â¿QuÃ© describe la apariencia de 'Vidrio Esmerilado' en una radiografÃ­a?", a: ["Ameloblastoma", "Displasia Fibrosa", "Osteosarcoma", "Mieloma MÃºltiple"], correct: 1 },
            { q: "Â¿CuÃ¡l es la acciÃ³n principal del mÃºsculo Masetero?", a: ["ProtrusiÃ³n", "DepresiÃ³n", "ElevaciÃ³n", "RetracciÃ³n"], correct: 2 },
            { q: "Â¿QuÃ© nervio corre riesgo durante la extracciÃ³n de un tercer molar inferior?", a: ["Nervio Facial", "Nervio Lingual", "Nervio Maxilar", "Nervio Hipogloso"], correct: 1 },
            { q: "Â¿CuÃ¡l es el tratamiento de elecciÃ³n para el 'Status Epilepticus' en el consultorio dental?", a: ["Etosuximida", "Diazepam (IV/IM)", "FenitoÃ­na", "Aspirina"], correct: 1 },
            { q: "La 'Y invertida' en una radiografÃ­a estÃ¡ formada por la uniÃ³n de:", a: ["Seno Maxilar y Fosa Nasal", "Ã“rbita y Seno", "Conducto Incisivo y Paladar", "Conducto Mandibular y Foramen Mentoniano"], correct: 0 },
            { q: "Â¿CuÃ¡l anestÃ©sico local es un Ã©ster?", a: ["LidocaÃ­na", "ArticaÃ­na", "BenzocaÃ­na", "MepivacaÃ­na"], correct: 2 },
            { q: "Â¿QuÃ© tipo de shock se caracteriza por un olor a aliento frutal (acetona)?", a: ["AnafilÃ¡ctico", "HipovolÃ©mico", "Cetoacidosis", "SÃ©ptico"], correct: 2 },
            { q: "La 'ErupciÃ³n en mariposa' es un signo clÃ¡sico de:", a: ["Lupus Eritematoso", "PÃ©nfigo Vulgar", "Liquen Plano", "Candidiasis"], correct: 0 },
            { q: "Â¿QuÃ© cÃ©lula es responsable de la resorciÃ³n del hueso?", a: ["Osteoblasto", "Osteoclasto", "Osteocito", "Fibroblasto"], correct: 1 },
            { q: "Â¿CuÃ¡l es el componente principal de la Gutapercha dental?", a: ["Sulfato de Bario", "Ã“xido de Zinc", "Gutapercha Pura", "Cera"], correct: 1 },
            { q: "Una radiolucidez en 'Pompas de JabÃ³n' se asocia mÃ¡s comÃºnmente con:", a: ["Odontoma", "Ameloblastoma", "Quiste Periapical", "Cementoblastoma"], correct: 1 },
            { q: "Â¿QuÃ© antibiÃ³tico estÃ¡ contraindicado en el embarazo por teÃ±ir los dientes?", a: ["Amoxicilina", "Clindamicina", "Tetraciclina", "Eritromicina"], correct: 2 },
            { q: "El patrÃ³n trabecular en 'Escalera' o 'Valla' se observa en:", a: ["Anemia", "Enfermedad de Paget", "Diabetes", "Anemia Falciforme"], correct: 3 },
            { q: "Â¿QuÃ© par craneal controla los mÃºsculos de la expresiÃ³n facial?", a: ["V (TrigÃ©mino)", "VII (Facial)", "IX (GlosofarÃ­ngeo)", "XII (Hipogloso)"], correct: 1 },
            { q: "Â¿CuÃ¡l es la dosis mÃ¡xima de Epinefrina para un paciente sano?", a: ["0.04 mg", "0.2 mg", "1.0 mg", "0.5 mg"], correct: 1 },
            { q: "Â¿QuÃ© condiciÃ³n muestra hueso con apariencia de 'Mota de AlgodÃ³n'?", a: ["EnelopatÃ­a", "Enfermedad de Paget", "Displasia Fibrosa", "Osteomielitis"], correct: 1 },
            { q: "El sitio mÃ¡s comÃºn para un Mucocele es:", a: ["Labio Superior", "Labio Inferior", "Paladar Duro", "Paladar Blando"], correct: 1 },
            { q: "Â¿QuÃ© vitamina es esencial para la coagulaciÃ³n sanguÃ­nea?", a: ["Vitamina A", "Vitamina C", "Vitamina D", "Vitamina K"], correct: 3 },
            { q: "Â¿CuÃ¡l es la causa principal de la 'Alveolitis Seca' (OsteÃ­tis Alveolar)?", a: ["InfecciÃ³n", "FibrinÃ³lisis del coÃ¡gulo", "Trauma", "Mala higiene"], correct: 1 },
            { q: "La lÃ­nea 'Ah' tambiÃ©n se conoce como:", a: ["LÃ­nea de vibraciÃ³n", "Escotadura Hamular", "UniÃ³n mucogingival", "Reborde alveolar"], correct: 0 }
        ];

        let preguntasSeleccionadas = [];
        let indiceActual = 0;
        let aciertos = 0;

        function iniciarExamen() {
            preguntasSeleccionadas = [...bancoDePreguntas].sort(() => Math.random() - 0.5).slice(0, 20);
            indiceActual = 0;
            aciertos = 0;
            mostrarPregunta();
        }

        function mostrarPregunta() {
            if (indiceActual >= preguntasSeleccionadas.length) {
                const porcentaje = (aciertos / preguntasSeleccionadas.length) * 100;
                if (porcentaje >= 60) document.getElementById("sonido-final").play();

                document.getElementById("contenedor-juego").innerHTML = `
                    <div style="text-align: center; padding: 20px;">
                        <h2>Â¡Reto Terminado!</h2>
                        <p style="font-size: 28px; font-weight: bold;">CalificaciÃ³n: ${aciertos} de 20</p>
                        <p style="color: ${porcentaje >= 60 ? 'green' : 'red'};">${porcentaje >= 60 ? 'Â¡Felicidades, Doctor!' : 'A estudiar mÃ¡s.'}</p>
                        <button onclick="location.reload()" class="opcion" style="background: #2ecc71; color: white;">Volver a jugar ðŸ”„</button>
                        <button onclick="window.location.href='index.html'" class="opcion" style="background: #e74c3c; color: white;">Salir al MenÃº ðŸšª</button>
                    </div>`;
                return;
            }

            const p = preguntasSeleccionadas[indiceActual];
            document.getElementById("pregunta-texto").innerText = p.q;
            document.getElementById("contador").innerText = "Pregunta: " + (indiceActual + 1) + " de 20";
            
            const opcionesDiv = document.getElementById("opciones");
            opcionesDiv.innerHTML = "";
            document.getElementById("feedback").innerText = "";

            // MEZCLAR RESPUESTAS
            let mezcladas = p.a.map((texto, index) => ({ texto, index }));
            mezcladas.sort(() => Math.random() - 0.5);

            mezcladas.forEach((obj) => {
                const btn = document.createElement("button");
                btn.innerText = obj.texto;
                btn.className = "opcion";
                btn.onclick = () => verificar(obj.index);
                opcionesDiv.appendChild(btn);
            });
        }

        function verificar(elegida) {
            const correcta = preguntasSeleccionadas[indiceActual].correct;
            const botones = document.querySelectorAll(".opcion");
            botones.forEach(b => b.disabled = true);

            if (elegida === correcta) {
                aciertos++;
                document.getElementById("feedback").innerText = "Â¡Correcto! âœ…";
                document.getElementById("sonido-bien").play();
            } else {
                document.getElementById("feedback").innerText = "Incorrecto âŒ";
                document.getElementById("sonido-mal").play();
            }

            setTimeout(() => {
                indiceActual++;
                mostrarPregunta();
            }, 1500);
        }

        iniciarExamen();
    </script>
</body>
</html>